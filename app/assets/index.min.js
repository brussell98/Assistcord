function login(){if(!loggingIn){loggingIn=!0,document.getElementById("saveLogin").checked&&(localStorage.setItem("discEmail",CryptoJS.AES.encrypt(document.getElementsByName("email")[0].value,"asgvkf4yut584fq8hbw")),localStorage.setItem("discPass",CryptoJS.AES.encrypt(document.getElementsByName("pass")[0].value,"asgvkf4yut584fq8hbw")));var e=document.getElementsByName("email")[0].value,t=document.getElementsByName("pass")[0].value;bot.login(e,t,function(e,t){e&&(document.getElementsByClassName("login-info")[0].innerHTML="Failed: Either your email or password is incorrect",$("#login-btn").blur(),loggingIn=!1)})}}function replaceMessage(e){var t=!1,o=e.content;replaces.forEach(function(e){if(o.indexOf(e.find)>-1){var a=new RegExp(e.find,"g");o=o.replace(a,e.replace),t=!0}}),t&&bot.updateMessage(e,o,function(e){e&&console.log("Error updating message: "+e.stack)})}function setStatus(){var e=document.getElementsByName("status")[0].value;e&&e!=currentGame&&(bot.setPlayingGame(e),currentGame=e,document.getElementById("status").innerHTML="Playing "+e)}function clearStatus(){loggedIn&&(console.log("Cleared game"),bot.setPlayingGame(null),currentGame="",document.getElementById("status").innerHTML="Not Playing")}function toggleAuto(){auto?auto=!1:(auto=!0,autoUpdate())}function autoUpdate(){auto&&getTasks()}function getTasks(){var e=require("child_process").spawn,t=e("tasklist",["-v","/fo","csv"]),o=[];t.stdout.on("data",function(e){o.push(e)}),t.on("close",function(e){checkForMatch(o.join("").split("\r\n"))})}function checkForMatch(e){for(var t=0;t<=e.length;t++)if(t==e.length)""!==currentGame&&(bot.setPlayingGame(null),currentGame="",document.getElementById("status").innerHTML="Not Playing");else{var o=document.getElementById("player");if(1==o.selectedIndex&&e[t].startsWith('"mpc-hc.exe')){if(null!==/:\d\d",".+"$/.exec(e[t])){var a=/:\d\d",".+"$/.exec(e[t])[0].substr(6).replace(/"$/,"");"N/A"!=a&&"Media Player Classic Home Cinema"!=a&&(a=a.replace(/\[[^\]]+\]/g,"").replace(/_/g," ").replace(/\.[a-zA-Z]{3,5}$/,"").trim(),a!=currentGame?(bot.setPlayingGame(a),console.log(a),currentGame=a,document.getElementById("status").innerHTML="Playing "+a,t=e.length+1):t=e.length+1)}}else if(2==o.selectedIndex&&e[t].startsWith('"vlc.exe')&&null!==/:\d\d",".+ - VLC media player"$/.exec(e[t])){var a=/:\d\d",".+ - VLC media player"$/.exec(e[t])[0].substr(6).replace(/"$/,"");"N/A"!=a&&"VLC media player"!=a&&(a=a.replace(/\[[^\]]+\]/g,"").replace(/_/g," ").replace(/\.[a-zA-Z]{3,5} - VLC media player$/,"").trim(),a!=currentGame?(bot.setPlayingGame(a),console.log(a),currentGame=a,document.getElementById("status").innerHTML="Playing "+a,t=e.length+1):t=e.length+1)}}}function addReplace(){var e=document.getElementsByName("find")[0].value,t=document.getElementsByName("replace")[0].value;if(e&&t){if(document.getElementsByName("find")[0].value="",document.getElementsByName("replace")[0].value="",autoCount++,localStorage.autos){var o=JSON.parse(localStorage.autos),a={id:autoCount,find:e,replace:t};o.push(a),localStorage.autos=JSON.stringify(o)}else{var o=[],a={id:autoCount,find:e,replace:t};o.push(a),localStorage.autos=JSON.stringify(o)}var r=localStorage.darkTheme?" dark":"",n=localStorage.darkTheme?' style="border-bottom-width: 1px !important; border-bottom-style: solid !important; border-bottom-color: rgb(25, 118, 210) !important; color: rgb(245, 245, 245) !important;"':"",l=localStorage.darkTheme?' style="color: rgb(245, 245, 245); background-color: rgb(25, 118, 210);"':"";$("#autos").append('<form id="auto'+autoCount+'" class="form auto-form"><input class="forminput auto-find'+r+'" type="text" id="find'+autoCount+'" value="'+e.replace(/"/g,"&quot;")+'""'+n+'" disabled><input class="forminput auto-replace" type="text" id="replace'+autoCount+'" value="'+t.replace(/"/g,"&quot;")+'"'+n+' disabled><input id="rem-auto-btn" name="auto'+autoCount+'" class="right btn btn-blue auto-rem" type="submit" value="-" onclick="event.preventDefault();remReplace(this);this.blur();"'+l+"></form>"),replaces.push({find:e,replace:t})}}function remReplace(e){var t=JSON.parse(localStorage.autos),o=e.name.replace(/auto/,"");t.splice(parseInt(o)-1,1),replaces.splice(parseInt(o)-1,1);for(var a=0;a<t.length;a++)t[a].id>o&&(t[a].id=t[a].id-1);$("#"+e.name).remove(),autoCount--,localStorage.autos=JSON.stringify(t),$(".auto-find").each(function(){var e=parseInt(this.id.replace(/find/,""));e>o&&$(this).prop("id","find"+(e-1))}),$(".auto-form").each(function(){var e=parseInt(this.id.replace(/auto/,""));e>o&&$(this).prop("id","auto"+(e-1))}),$(".auto-replace").each(function(){var e=parseInt(this.id.replace(/replace/,""));e>o&&$(this).prop("id","replace"+(e-1))}),$(".auto-rem").each(function(){var e=parseInt(this.name.replace(/auto/,""));e>o&&$(this).prop("name","auto"+(e-1))})}function toggleDarkTheme(){dark?(dark=!1,$("#login").css("background-color",""),$("html").css("color",""),$(".btn-blue").css("background-color",""),$(".btn-blue").css("color",""),$(".status-bar").css("background-color",""),$(".material-select").css("color",""),$(".material-select").css("border-bottom",""),$(".auto-replace").css("color",""),$(".auto-replace").css("border-bottom-color",""),$(".auto-find").css("color",""),$(".auto-find").css("border-bottom-color",""),$(".forminput").css("border-bottom",""),$(".forminput").css("color",""),$(".forminput").toggleClass("dark"),$(".btn-flat").css("color",""),$(".card").css("background",""),$(".cardbanner").css("background-color",""),$("#bot-settings-btn").css("color",""),$("#bot-settings-btn").css("background-color",""),$(".onoffswitch-label").toggleClass("dark"),$(".onoffswitch-checkbox").toggleClass("dark"),$(".switch-text").css("color",""),$("body").css("background-color",""),$("option").css("background-color",""),$("option").css("color",""),localStorage.setItem("darkTheme",!1)):(dark=!0,$("#login").css("background-color","#212121"),$("html").css("color","#f5f5f5"),$(".btn-blue").css("background-color","#1976d2"),$(".btn-blue").css("color","#f5f5f5"),$(".status-bar").css("background-color","#1976d2"),$(".material-select").css("color","#e0e0e0"),$(".material-select").css("border-bottom","1px solid #d6d6d6"),$(".auto-replace").css("color","#f5f5f5"),$(".auto-replace").css("border-bottom-color","#1976d2 !important"),$(".auto-find").css("color","#f5f5f5"),$(".auto-find").css("border-bottom-color","#1976d2 !important"),$(".forminput").css("border-bottom","1px solid #d6d6d6"),$(".forminput").css("color","#f5f5f5"),$(".forminput").toggleClass("dark"),$(".btn-flat").css("color","#1976d2"),$(".card").css("background","#363636"),$(".cardbanner").css("background-color","#1976d2"),$("#bot-settings-btn").css("color","#f5f5f5"),$("#bot-settings-btn").css("background-color","#363636"),$(".onoffswitch-label").toggleClass("dark"),$(".onoffswitch-checkbox").toggleClass("dark"),$(".switch-text").css("color","#e0e0e0"),$("body").css("background-color","#212121"),$("option").css("background-color","#525252"),$("option").css("color","#f5f5f5"),localStorage.setItem("darkTheme",!0))}var autoCount=0,loggedIn=!1,loggingIn=!1,dark=!1,replaces=[],watchingTimer,gameUpdaterTimer,auto=!1,currentGame="";$(document).ready(function(){void 0!==localStorage.darkTheme&&localStorage.darkTheme&&toggleDarkTheme(),void 0!==localStorage.discEmail&&(document.getElementsByName("email")[0].value=CryptoJS.AES.decrypt(localStorage.discEmail,"asgvkf4yut584fq8hbw").toString(CryptoJS.enc.Utf8)),void 0!==localStorage.discPass&&(document.getElementsByName("pass")[0].value=CryptoJS.AES.decrypt(localStorage.discPass,"asgvkf4yut584fq8hbw").toString(CryptoJS.enc.Utf8));var e=localStorage.autos;if(e){e=JSON.parse(e);var t=localStorage.darkTheme?" dark":"",o=localStorage.darkTheme?' style="border-bottom-width: 1px !important; border-bottom-style: solid !important; border-bottom-color: rgb(25, 118, 210) !important; color: rgb(245, 245, 245) !important;"':"",a=localStorage.darkTheme?' style="color: rgb(245, 245, 245); background-color: rgb(25, 118, 210);"':"";e.forEach(function(e){autoCount++,$("#autos").append('<form id="auto'+e.id+'" class="form auto-form"><input class="forminput auto-find'+t+'" type="text" id="find'+e.id+'" value="'+e.find.replace(/"/g,"&quot;")+'"'+o+' disabled><input class="forminput auto-replace" type="text" id="replace'+e.id+'" value="'+e.replace.replace(/"/g,"&quot;")+'"'+o+' disabled><input id="rem-auto-btn" name="auto'+e.id+'" class="right btn btn-blue auto-rem" type="submit" value="-" onclick="event.preventDefault();remReplace(this);this.blur();"'+a+"></form>"),replaces.push({find:e.find,replace:e.replace})})}$(".form").on("submit",function(e){e.preventDefault()})});var discord=require("discord.js"),bot=new discord.Client;bot.on("ready",function(){$("#login").hide(),loggingIn=!1,loggedIn=!0,document.getElementById("username").innerHTML="Logged in as "+bot.user.username,""!=currentGame?document.getElementById("status").innerHTML="Playing "+currentGame:document.getElementById("status").innerHTML="Not Playing",watchingTimer=setInterval(function(){autoUpdate()},3e4),gameUpdaterTimer=setInterval(function(){""!==currentGame&&bot.setPlayingGame(currentGame)},12e4)}),bot.on("disconnected",function(){loggedIn&&(console.log("Lost connection to discord"),loggedIn=!1,auto=!1,clearInterval(watchingTimer),clearInterval(gameUpdaterTimer),document.getElementsByClassName("login-info")[0].innerHTML="Lost connection",$("#login").show())}),bot.on("message",function(e){e.author.id==bot.user.id&&0!==replaces.length&&replaceMessage(e)});