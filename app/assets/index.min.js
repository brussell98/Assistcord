function login(){document.getElementById("saveLogin").checked&&(localStorage.setItem("discEmail",document.getElementsByName("email")[0].value),localStorage.setItem("discPass",document.getElementsByName("pass")[0].value));var e=document.getElementsByName("email")[0].value,t=document.getElementsByName("pass")[0].value;bot.login(e,t)}function setStatus(){var e=document.getElementsByName("status")[0].value;e&&e!=currentGame&&(bot.setPlayingGame(e),currentGame=e,document.getElementById("status").innerHTML="Playing "+e)}function clearStatus(){loggedIn&&(console.log("Cleared game"),bot.setPlayingGame(null),currentGame="",document.getElementById("status").innerHTML="Not Playing")}function toggleAuto(){auto?auto=!1:(auto=!0,autoUpdate())}function autoUpdate(){auto&&getTasks()}function getTasks(){var e=require("child_process").spawn,t=e("tasklist",["-v","/fo","csv"]),a=[];t.stdout.on("data",function(e){a.push(e)}),t.on("close",function(e){checkForMatch(a.join("").split("\r\n"))})}function checkForMatch(e){for(var t=0;t<=e.length;t++)if(t==e.length)""!==currentGame&&(bot.setPlayingGame(null),currentGame="",document.getElementById("status").innerHTML="Not Playing");else{var a=document.getElementById("player");if(1==a.selectedIndex&&e[t].startsWith('"mpc-hc.exe')){if(null!==/:\d\d",".+"$/.exec(e[t])){var n=/:\d\d",".+"$/.exec(e[t])[0].substr(6).replace(/"$/,"");"N/A"!=n&&"Media Player Classic Home Cinema"!=n&&(n=n.replace(/\[[^\]]+\]/g,"").replace(/_/g," ").replace(/\.[a-zA-Z]{3,5}$/,"").trim(),n!=currentGame?(bot.setPlayingGame(n),console.log(n),currentGame=n,document.getElementById("status").innerHTML="Playing "+n,t=e.length+1):t=e.length+1)}}else if(2==a.selectedIndex&&e[t].startsWith('"vlc.exe')&&null!==/:\d\d",".+ - VLC media player"$/.exec(e[t])){var n=/:\d\d",".+ - VLC media player"$/.exec(e[t])[0].substr(6).replace(/"$/,"");"N/A"!=n&&"VLC media player"!=n&&(n=n.replace(/\[[^\]]+\]/g,"").replace(/_/g," ").replace(/\.[a-zA-Z]{3,5} - VLC media player$/,"").trim(),n!=currentGame?(bot.setPlayingGame(n),console.log(n),currentGame=n,document.getElementById("status").innerHTML="Playing "+n,t=e.length+1):t=e.length+1)}}}function addReplace(){var e=document.getElementsByName("find")[0].value,t=document.getElementsByName("replace")[0].value;if(e&&t){if(document.getElementsByName("find")[0].value="",document.getElementsByName("replace")[0].value="",autoCount++,localStorage.autos){var a=JSON.parse(localStorage.autos),n={id:autoCount,find:e,replace:t};a.push(n),localStorage.autos=JSON.stringify(a)}else{var a=[],n={id:autoCount,find:e,replace:t};a.push(n),localStorage.autos=JSON.stringify(a)}$("#autos").append('<form id="auto'+autoCount+'" class="form auto-form"><input class="forminput auto-find" type="text" id="find'+autoCount+'" value="'+e.replace(/"/g,"&quot;")+'" disabled><input class="forminput auto-replace" type="text" id="replace'+autoCount+'" value="'+t.replace(/"/g,"&quot;")+'" disabled><input id="rem-auto-btn" name="auto'+autoCount+'" class="right btn btn-blue auto-rem" type="submit" value="-" onclick="event.preventDefault();remReplace(this);this.blur();"></form>')}}function remReplace(e){var t=JSON.parse(localStorage.autos),a=e.name.replace(/auto/,"");t.splice(parseInt(a)-1,1);for(var n=0;n<t.length;n++)t[n].id>a&&(t[n].id=t[n].id-1);$("#"+e.name).remove(),autoCount--,localStorage.autos=JSON.stringify(t),$(".auto-find").each(function(){var e=parseInt(this.id.replace(/find/,""));e>a&&$(this).prop("id","find"+(e-1))}),$(".auto-form").each(function(){var e=parseInt(this.id.replace(/auto/,""));e>a&&$(this).prop("id","auto"+(e-1))}),$(".auto-replace").each(function(){var e=parseInt(this.id.replace(/replace/,""));e>a&&$(this).prop("id","replace"+(e-1))}),$(".auto-rem").each(function(){var e=parseInt(this.name.replace(/auto/,""));e>a&&$(this).prop("name","auto"+(e-1))})}var autoCount=0,loggedIn=!1;$(document).ready(function(){void 0!==localStorage.discEmail&&(document.getElementsByName("email")[0].value=localStorage.discEmail),void 0!==localStorage.discPass&&(document.getElementsByName("pass")[0].value=localStorage.discPass);var e=localStorage.autos;e&&(e=JSON.parse(e),e.forEach(function(e){autoCount++,$("#autos").append('<form id="auto'+e.id+'" class="form auto-form"><input class="forminput auto-find" type="text" id="find'+e.id+'" value="'+e.find.replace(/"/g,"&quot;")+'" disabled><input class="forminput auto-replace" type="text" id="replace'+e.id+'" value="'+e.replace.replace(/"/g,"&quot;")+'" disabled><input id="rem-auto-btn" name="auto'+e.id+'" class="right btn btn-blue auto-rem" type="submit" value="-" onclick="event.preventDefault();remReplace(this);this.blur();"></form>')})),$(".form").on("submit",function(e){e.preventDefault()})});var discord=require("discord.js"),bot=new discord.Client,auto=!1,currentGame="";bot.on("ready",function(){$("#login").hide(),loggedIn=!0,document.getElementById("username").innerHTML="Logged in as "+bot.user.username,null!==bot.user.game?document.getElementById("status").innerHTML="Playing "+bot.user.game.name:document.getElementById("status").innerHTML="Not Playing",setInterval(function(){autoUpdate()},3e4),setInterval(function(){""!==currentGame&&bot.setPlayingGame(currentGame)},12e4)}),bot.on("disconnected",function(){console.log("Lost connection to discord"),loggedIn=!1,auto=!1});